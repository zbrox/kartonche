#!/usr/bin/env bash
#MISE description="Run all tests (unit + UI)"

set -euo pipefail

# Use environment variables with sensible defaults
DEVICE="${IOS_DEVICE:-iPhone 16 Pro}"
OS_VERSION="${IOS_VERSION:-26.2}"
DESTINATION="platform=iOS Simulator,name=$DEVICE,OS=$OS_VERSION"

xcodebuild test \
  -project "$PROJECT" \
  -scheme "$SCHEME" \
  -destination "$DESTINATION" | xcbeautify
