#!/usr/bin/env bash
#MISE description="Update CHANGELOG.md from git history"

set -euo pipefail

echo "üìù Updating CHANGELOG.md..."

if ! command -v git-cliff >/dev/null 2>&1; then
  echo "‚ùå git-cliff not found"
  echo "Install with: brew install git-cliff"
  exit 1
fi

git cliff --output CHANGELOG.md

if [ $? -eq 0 ]; then
  echo "‚úÖ CHANGELOG.md updated successfully"
  echo ""
  echo "Review the changes:"
  echo "  git diff CHANGELOG.md"
else
  echo "‚ùå Failed to update CHANGELOG.md"
  exit 1
fi
