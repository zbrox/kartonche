#!/usr/bin/env bash
#MISE description="Full CI check (build + test)"
#usage: ci [--full]
#arg: --full "Run all tests including UI tests (default: unit tests only)"

set -euo pipefail

FULL_TESTS=false
if [ "${1:-}" = "--full" ]; then
  FULL_TESTS=true
fi

echo "ðŸ”„ Running CI workflow..."
echo ""

echo "Step 1/2: Building..."
mise run build

echo ""
if [ "$FULL_TESTS" = true ]; then
  echo "Step 2/2: Running all tests (unit + UI)..."
  mise run test-all
else
  echo "Step 2/2: Running unit tests..."
  mise run test
fi

echo ""
echo "âœ… CI workflow complete"
