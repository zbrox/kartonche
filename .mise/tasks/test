#!/usr/bin/env bash
#MISE description="Run unit tests"

set -euo pipefail

if [ -n "${1:-}" ]; then
  # Run specific test
  xcodebuild test \
    -project "$PROJECT" \
    -scheme "$SCHEME" \
    -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
    -quiet \
    -only-testing:"$1" | xcbeautify
else
  # Run all unit tests
  xcodebuild test \
    -project "$PROJECT" \
    -scheme "$SCHEME" \
    -destination 'platform=iOS Simulator,name=iPhone 17 Pro' \
    -quiet \
    -only-testing:kartoncheTests | xcbeautify
fi
